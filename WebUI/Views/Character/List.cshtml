@model WebUI.Models.MainModel

@{
    ViewBag.Title = "List";
    <link href="@Url.Content("~/Content/Characters.css")"
          rel="stylesheet" type="text/css" />
}

<div class="root">
    <h2>Characters</h2>
    @Html.ActionLink("Display males", "List", "Character", new { fieldName = "Sex", fieldValue = "Male" }, null)
    @Html.ActionLink("Display women", "List", "Character", new { fieldName = "Sex", fieldValue = "Female" }, null)
    @Html.ActionLink("Display dead people", "List", "Character", new { fieldName = "IsAlive", fieldValue = "False" }, null)
    @Html.RouteLink("Display all", "Default", new { action = "List" })
    @Html.ActionLink("Get cart", "Cart","Cart")
    @{ Html.RenderAction("Cart", "Cart"); }

    <h2>Продвинутый поиск</h2>
    @{Html.BeginForm("List", "Character", FormMethod.Post);}
        <ul style="float:left; padding-left:0">
        <li style="display:inline">
            <label>Name</label>
            <input name="name" value="@ViewBag.Name"/>
        </li>

        <li style="display:inline">
            @{ 
                var param = ViewBag.IsAlive == null ? false : (bool)ViewBag.IsAlive;
                var checkLife = param ? "selected" : "";
                var checkDead = param ? "" : "selected";
             }
            <select id="Alive?" name="isAlive">
                <option value="True" @checkLife>Alive</option>
                <option value="False" @checkDead>Dead</option>
            </select>
        </li>

        <li style="display:inline">
            @{ 
                var checkFemale = "selected";
                var checkMale = "";

                if (ViewBag.Sex != null)
                {
                    checkFemale = ViewBag.Sex.ToString() == "Female" ? "selected" : "";
                    checkMale = ViewBag.Sex.ToString() == "Female" ? "" : "selected";
                }
             }
            <select id="Sex" name="sex">
                <option value="Male" @checkMale>Male</option>
                <option value="Female" @checkFemale>Female</option>
            </select>
        </li>
        </ul>

    <input style="margin-left:5px" type="submit" value="Search" />

    @{Html.EndForm();}

    @foreach (var item in Model.Characters.ToList())
    {
        <div class="character-container">
            <div class="image-container">
                <img src="~/Content/Images/@item.PicturePath" />
            </div>
            <div class="character-info">
                <div class="character__name">@Html.DisplayFor(modelItem => item.Name)</div>
                <div class="character__description">@Html.DisplayFor(modelItem => item.Description)</div>
                <div class="character__cost">Cost: @Html.DisplayFor(modelItem => item.Cost)</div>
                <div class="character__status"> Status:
                    @if (item.IsAlive)
                    {
                        <span>Alive</span>
                    }
                    else
                    {
                        <span>Dead</span>
                    }
                    <div class="character-sex">Sex: @item.Sex.ToString()</div>
                </div>
            </div>
            
            @{Html.BeginForm("AddToCart", "Cart");}
            <input type="hidden" name="id" value="@item.Id"/>
            <input type="hidden" name="returnUrl" value="@Model.ReturnUrl"/>
            <input value="Vote" type="submit" />
            @{Html.EndForm();}
        </div>

        @*    <tr>*@
        @*        <td>*@
        @*            @Html.DisplayFor(modelItem => item.Name)*@
        @*        </td>*@
        @*        <td>*@
        @*            @Html.DisplayFor(modelItem => item.Description)*@
        @*        </td>*@
        @*        <td>*@
        @*            @Html.DisplayFor(modelItem => item.Cost)*@
        @*        </td>*@
        @*        <td>*@
        @*            @Html.DisplayFor(modelItem => item.IsAlive)*@
        @*        </td>*@
        @*        <td>*@
        @*           <img src="../Content/Images/@item.PicturePath"/>*@
        @*        </td>*@
        @*    </tr>*@
    }
</div>